# 正規表現とメタ文字

## メタ文字
- メタ文字を使うと, ｢数字とマッチ｣や｢アルファベットとマッチ｣などといった正規表現を, より簡単に表現することができます.
- ここでは, よく使うメタ文字を紹介します.

## メタ文字(1)

- `\w` ... アルファベット, 数字, アンダーバーの1文字
	* `[a-zA-Z0-9_]`と同じ意味です.

- `\W` ... アルファベット, 数字, アンダーバー以外の1文字
	* `[^a-zA-Z0-9_]`と同じ意味です.

- `\d` ... 数字の1文字
	* `[0-9]`と同じ意味です.

- `\D` ... 数字以外の1文字
	* `[^0-9]`と同じ意味です.

## メタ文字(1)
- `\s` ... 空白文字にマッチ
	* `[ \n\r\f\t]`と同じ意味です.

- `\S` ... 空白文字以外にマッチ
	* `[^ \n\r\f\t]`と同じ意味です.

## メタ文字(1) 使い方

	my $str1 = '2012年7月22日';
	if($str1 =~ /(\d+)年(\d+)月(\d+)日/) {
		print "$1/$2/$3";
		# "2012/7/22"と表示される.
	}
	my $str2 = "この    文章  は\n 読みにく\nい    で  \t    す\n";
	$str2 =~ s/\s+//g;
	# $str2 = "この文章は読みにくいです";

- `\s`を使えば, 余分な空白や改行を抜き取ることができます.

## メタ文字(2)
- `|` ... 選択一致（OR検索）
	* 例えば, `abc|def|ghi`は, `abc`, `def`, `ghi`のいずれかにマッチします.
- `(x)` ... グループ化
	* 正規表現をグループ化します.
	* 先に説明したように, `()`の中のパターンにマッチした文字列は記憶され, `$1`や`$2`のように後で参照することができます(後方参照).
- `(?:x)` ... 後方参照しないグループ化
	* 正規表現をグループ化しますが, `()`の中のパターンにマッチした文字列は記憶されません.

## メタ文字(2) 使い方
	my $str = 'perl is good!';
	if($str =~ /(?:perl|ruby|python) is (good|bad)!/) {
		print "評価は $1 です!\n";
		# "評価は good です!"と表示される.
	}

- `perl`, `ruby`, `python`を`|`でつなぎ, `(`と`)`で囲うことで, 選択一致をグループ化しています.
- 更に, `(?:`とすることで, 後方参照しないようにしています.
	* その為, $1は`(good|bad)`のパターンにマッチした文字列となります.

## 正規表現のメタ文字(3)
	my $str = 'john is dead.';
    if ($str =~ /dead\./) {
        print "match!\n";
    }

- `\` ... メタ文字を無効化する
	- 正規表現の中で特殊な意味を持つ文字(例えば`/`や`.`など)を無効化します.
- この場合. `$str =~ /dead./`は, `john is dead!`などでもマッチしてしまう(`.`は任意の1文字とマッチ, なので).
- `\.`のようにすれば `.`そのものとのマッチができます.

## アンカー
- アンカーは, 行頭や行末など, 文字列の特定の位置とマッチします.
    - `^` ... 行頭
    - `$` ... 行末

## アンカー 使い方
	my $str = 'john is great';
	# 行頭に'john'がある場合のみマッチ
    if ($str =~ /^john/) {
        print "match!\n";
    }

## 区切り記号の変更(1)
	my $str = '/usr/local/bin/perl';
    if ($str =~ m|bin/perl|) {
        print "match!\n";
    }

- 正規表現は`/`で区切りますが, `/`だと不都合な場合も多いです(例えば, URLを表記する場合など. 全ての`/`をエスケープする必要がある).
- そこで, `m//`のように, 先頭に`m`を付けると, 任意の記号のペアを区切り記号として利用することができます.
- この場合, `|`を区切り記号にしています. よって, `/`をエスケープする必要はありません.

## 区切り記号の変更(2)
	my $str = '/usr/local/bin/perl';
	$str =~ s|/usr/local/bin/|/usr/bin/|;

- 置換の場合, このようにできます.
